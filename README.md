#SOCIAL-LOG



##Функциональность (не все реализовано)

- Регистрация/Автори через ГосУслуги 
- Сервис социальной помощи, где гражданин может посмотреть полагающуюся 
помощь в связи с его материальным или социальным положением. Приложение позволяет
уведомлять пользователя о новых доступных видах помощи. Так же после регистрации
пользователь может получать государственную помощь, не осуществляя никаких действий
- Сервис борьбы с "теневой" бедностью, позволяющее строить тепловые карты и графики 
материального и социального состояния граждан
- Сервис реестра малоимущих, позволяющее госслужащим получать текущий реестр малоимущих

##Особенность проекта (не все реализовано)
- Проактивность государственной помощи: пользователю достаточно зарегистрироваться для того,
чтобы полагающаяся по закону помощь была осуществлена
- Аналитика "теневой" бедности. Тепловые карты реестра малоимущих, тепловые карты продовольственных
расходов, графики зависимости материального и социального состояний граждан
- Социальный калькулятор для самостоятельной идентификации гражданина, как имеющего права на государственную
помощь
- Обращение за данными как в государственные источники данных (СМЭВ), так и в коммерческие источники данных
(супермаркеты, гипермаркеты, дискаунтеры различных торговых сетей)
- Экосистема с мобильными, веб-приложениями и фоновыми сервисами, пригодная к расширению, легкому внедрению,
поддержки. Создана на наиболее актуальном технологическом стеке, что гарантирует долголетие и активное развитие
системы
  

## Как должно быть реализовано

В проект приложен файл Архитектура.PNG. 
Планировались несколько микросервисов со своими базами данных и сферой ответственнойстью.
Сервис интеграции получает данные с внешних сервисов, формирует список пар <поле, нормализованное значение>
отправляет в kafka. На топик кафка подписываются другие сервисы (Реестр граждан и Event Sourcing и т.д) 
и обновляют каждый свои бд. В последствии каждый из микросервисов предоставляет своё API, которое может дергать фронт.
 1. Сервис интеграции - знает о списке возможных столбцов и их расширенных типов из общей инеграционной бд, 
умеет получать и нормализовать данные, запаковывать и отправлять в kafka. Для подключения нового внешнего сервиса надо 
    описать Request/Response этого сервиса и мапу соответствия полей внешнего сервиса полям внутренней бд. 
 2. Сервис субсидий - хранит типы субсидий и условия их получения, предоставляет CRUD API для сотрудников администрации
 3. Реестр граждан - хранит текущее состояние социального профиля граждан. Формат данных расширяем. Для этого используется mongo
 и предоставление данных в JSONObject. Подписывается на kafka-топик, через который остальные сервисы передают данные об 
 изменении профиля пользователя. 
 4. Сервис EventSourcing - хранит набор событий изменений социального профиля граждан. Его можно использовать для аудита и 
    получения социального профиля гражданина на определенный момент времени для других сервисов. Сервиса аналитики, например.
 5. Сервис рассылок должен содержать функционал по отправке sms, email, push-уведомлений.
 

## Что успели сделать
В рамках хакатона успели сделать монолит с попыткой разделить разные сервисы на разные package для последующего быстрого
разделения на микросервисы. Желтые сущности на схеме - не реализованы.
- package integration соответствует сервису интеграции. планировалось, что будет ложить результаты своей работы в
  kafka, а остальные сервисы на это подписываться. В результате не хватило времени чтобы это реализовать и он дергается напрямую.
  В качестве внешнего сервиса представлен GetAllDataServiceClient, который эмулирует получение данных по СМЭВ от других сервисов.
  В нем собраны все поля, которые нам нужны. Может отдавать только 5 моковых клиентов id Э [1..5] с разными профилями. 
  При получении адреса - ходит в Dadata и достает оттуда координаты.
- poor_registry соответствует Сервису субсидий и реестру граждан
Желтые сущности - не реализованы.







## Основной стек технологий:
- JAVA 8
- Spring boot 2.5
  Spring
- Kafka
- MongoDb
- Docker/Docker-compose
- Git
- DaData

- Kotlin и Android для мобилки (отдельный репозиторий)
- Vue для фронта (отдельный репозиторий)

## Demo

Посмотреть работу сервиса вы можете по ссылке:
фронт на 80 порту:
    http://hackathon.rodial.pro/
бэк на 8080 (приложена postman коллекция):
  http://hackathon.rodial.pro:8080

## Для запуска 

- Установить JAVA 8
- Установить Docker
- Установить maven
- Порты 27017, 8080, 9092 должны быть открыты, иначе стоит их или открыть, или изменить конфигурацию проекта

## Установка

- Установить [JAVA 11](https://www.oracle.com/ru/java/technologies/javase/jdk11-archive-downloads.html). Выбрав 
необходимую версию, следовать инструкции установки
- Следуя [инструкции](https://docs.docker.com/get-docker/), установить окружение Docker
- Следуя [инструкции](https://maven.apache.org/install.html), установить maven. Скачать [пакет](https://maven.apache.org/download.cgi) 
- Выполнить команду `docker-compose up` из директории проекта docker
- Выполнить команду mvn clean install
- В директории проекта выполнить команду `mvn spring-boot:run`
- Backend запустится на порту 8080


## Разработчики
- Павел Колбасов @ko1bas
- Владимир Куров @VladimirKurov